<?php
/*
 Требуются:
     $project - Проект
*/
?>
<h1>
    <?php lpm_print_header(); ?>
</h1>
<div id="projectSettings" class="mx-auto" style="max-width: 900px;">
    <div class="card my-3">
        <div class="card-header">Настройки проекта</div>
        <div class="card-body">
            <form method="post" action="" onsubmit="return false;">
                <div class="alert alert-success info-message" role="alert" style="display: none;"></div>
                <input type="hidden" id="projectId" value="<?=$project->getID();?>" />

                <div class="mb-3">
                    <label id="gitlabGroupIdLabel" for="gitlabGroupId" class="form-label"
                        title="Перейдите на страницу группы в интерфейсе GitLab, там под именем группы будет указан 'Group ID'">
                        ID группы в GitLab
                    </label>
                    <input id="gitlabGroupId" type="text" class="form-control"
                        value="<?=empty($project->gitlabGroupId) ? '' : $project->gitlabGroupId; ?>">
                </div>

                <div class="mb-3">
                    <label id="gitlabProjectIdsLabel" for="gitlabProjectIds" class="form-label"
                           title="Project ID доступен на странице проекта в пункте Actions. Указывать через запятую.">
                        ID привязанных проектов в GitLab
                    </label>
                    <input id="gitlabProjectIds" type="text" class="form-control"
                           value="<?=implode(',', $project->getGitlabProjectIds()); ?>">
                </div>

                <div class="mb-3">
                    <label id="slackСhannelLabel" for="slackСhannel" class="form-label"
                        title="Для получения кликните правой клавишей мыши по имени канала и выберите 'Copy link'. Последняя часть в скопированном URL и есть искомый ID канала.">
                        ID канала оповещений в Slack
                    </label>
                    <input id="slackСhannel" type="text" class="form-control" value="<?=$project->slackNotifyChannel; ?>">
                </div>

                <div class="form-check mb-3">
                    <input id="scrumCheckbox" class="form-check-input" type="checkbox" <?=$project->scrum ? 'checked' : '' ?>>
                    <label class="form-check-label" for="scrumCheckbox">Проект использует Scrum</label>
                </div>

                <div class="d-flex gap-2 mt-2">
                    <button class="btn btn-success" id="setProjectSettings" type="submit">Сохранить</button>
                    <button class="btn btn-secondary" type="reset">Отмена</button>
                </div>
            </form>
        </div>
    </div>
    
</div>
